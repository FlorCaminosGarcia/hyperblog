"use strict";exports.id=522,exports.ids=[522],exports.modules={1369:(e,o,r)=>{r.r(o),r.d(o,{fromTokenFile:()=>d,fromWebToken:()=>c});var n=r(43),t=r(68),s=r(1368),i=r(10);const c=e=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:n,roleSessionName:t,webIdentityToken:s,providerId:i,policyArns:c,policy:a,durationSeconds:d}=e;let{roleAssumerWithWebIdentity:l}=e;if(!l){const{getDefaultRoleAssumerWithWebIdentity:n}=await r.e(717).then(r.bind(r,1377));l=n({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...o?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:n,RoleSessionName:t??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:c,Policy:a,DurationSeconds:d})},a="AWS_WEB_IDENTITY_TOKEN_FILE",d=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const o=e?.webIdentityTokenFile??process.env[a],r=e?.roleArn??process.env.AWS_ROLE_ARN,d=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!o||!r)throw new t.C("Web identity configuration not specified",{logger:e.logger});const l=await c({...e,webIdentityToken:s.Z?.getTokenRecord?.()[o]??(0,i.readFileSync)(o,{encoding:"ascii"}),roleArn:r,roleSessionName:d})();return o===process.env[a]&&(0,n.g)(l,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),l}},1368:(e,o,r)=>{r.d(o,{Z:()=>s});var n=r(1365),t=r(77);const s={getFileRecord:()=>t.Jj,interceptFile(e,o){t.Jj[e]=Promise.resolve(o)},getTokenRecord:()=>n.a,interceptToken(e,o){n.a[e]=o}}},1363:(e,o,r)=>{r.d(o,{C:()=>i});var n=r(9),t=r(5),s=r(75);const i=e=>{const o=(0,n.createHash)("sha1").update(e).digest("hex");return(0,t.join)((0,s.R)(),".aws","sso","cache",`${o}.json`)}},1365:(e,o,r)=>{r.d(o,{a:()=>i,v:()=>c});var n=r(10),t=r(1363);const{readFile:s}=n.promises,i={},c=async e=>{if(i[e])return i[e];const o=(0,t.C)(e),r=await s(o,"utf8");return JSON.parse(r)}}};